/*Links*/function fadeToHalf(){$(this).find("img").tween({opacity:{start:100,stop:50,duration:.5,effect:"easeOut"}});$.play()}function fadeToFull(){$(this).find("img").tween({opacity:{stop:100,duration:.5,effect:"easeOut"}});$.play()}function fadeTo90(){$(this).find("img").tween({opacity:{start:100,stop:90,duration:.5,effect:"easeOut"}});$.play()}function quickHide(e){e.tween({opacity:{stop:0,duration:.1}});$.play()}function normalShow(e){e.tween({opacity:{stop:100,duration:3,effect:"easeOut"}});$.play()}function fastShow(e){e.tween({opacity:{stop:100,duration:1,effect:"easeOut"}});$.play()}function slide_left2(){var e=0;arguments.length>0&&(e=arguments[0]);$("#pets123").animate({"margin-left":"-=264"},function(){f_li=$("<div />").append($("#pets123").children("li:first-child").clone()).html();$("#pets123").children("li:first-child").remove();$("#pets123").append(f_li);$("#pets123").css({"margin-left":parseInt($("#pets123").css("margin-left"))+264+"px"})});e&&setTimeout("slide_left2("+e+");",4e3)}function slide_right2(){var e=0;arguments.length>0&&(e=arguments[0]);$("#pets123").animate({"margin-left":"+=264"},function(){l_li=$("<div />").append($("#pets123").children("li:last-child").clone()).html();$("#pets123").children("li:last-child").remove();$("#pets123").prepend(l_li);$("#pets123").css({"margin-left":parseInt($("#pets123").css("margin-left"))-264+"px"})});e&&setTimeout("slide_right2("+e+");",4e3)}function slide_left(){var e=0;arguments.length>0&&(e=arguments[0]);$("#slider22").animate({"margin-left":"-=382"},function(){f_li=$("<div />").append($("#slider22").children("li:first-child").clone()).html();$("#slider22").children("li:first-child").remove();$("#slider22").append(f_li);$("#slider22").css({"margin-left":parseInt($("#slider22").css("margin-left"))+382+"px"})});e&&setTimeout("slide_left("+e+");",4e3)}function slide_right(){var e=0;arguments.length>0&&(e=arguments[0]);$("#slider22").animate({"margin-left":"+=382"},function(){l_li=$("<div />").append($("#slider22").children("li:last-child").clone()).html();$("#slider22").children("li:last-child").remove();$("#slider22").prepend(l_li);$("#slider22").css({"margin-left":parseInt($("#slider22").css("margin-left"))-382+"px"})});e&&setTimeout("slide_right("+e+");",4e3)}function initFooter(){quickHide($("#footer .othergames a img.txt"));$("#footer .othergames a").hover(function(){$(this).find("img.icon").tween({opacity:{start:100,stop:25,duration:.5,effect:"easeInOut"}});$(this).find("img.txt").tween({opacity:{start:0,stop:100,duration:.8,effect:"easeIn"}});$.play()},function(){$(this).find("img.icon").tween({opacity:{start:25,stop:100,duration:.5,effect:"easeInOut"}});$(this).find("img.txt").tween({opacity:{start:100,stop:0,duration:.8,effect:"easeOut"}});$.play()})}var googleplay_link="https://play.google.com/store/apps/details?id=sts.al&hl=en",chrome_link="https://chrome.google.com/webstore/detail/arcane-legends/ibmlkgieigeddcedpbijnpojheoddido",appstore_link="http://itunes.apple.com/us/app/arcane-legends/id543335870",kindle_link="http://support.spacetimestudios.com/entries/20789066-can-i-play-on-a-kindle-fire";jQuery(function(e){function i(){if(r==-1)return!1;e("#menu ul li a").eq(r%e("#menu ul li a").length).trigger("click",[!0]);r++}function c(e,t){l&&l.goToSlide(0)}function h(t,n){var r="";console.log("i : "+t+"\nwidth : "+n);document.documentElement.id="s_"+t;var i=Math.round(n/480*100)/100;if(t==1){var s=document.getElementsByName("viewport")[0];s&&s.parentNode.removeChild(s);r="<meta name='viewport' id='viewport' content='width=480' />";u&&(r="<meta name='viewport' id='viewport' content='width=device-width' />");e("head").prepend(r);a=window.screen.width;maxImages=5;T("sml")}else{isTierTablet?e("#pet").addClass("tablet"):e("#pet").removeClass("tablet");var s=document.getElementsByName("viewport")[0];s&&s.parentNode.removeChild(s);r="<meta name='viewport' content='width=1024>";e("head").append(r);a=window.screen.width;maxImages=1;l&&l.resizeWidth(445);T("lrg");c&&c(0,500)}}function p(){e("#popup_wrapper").css("display","block");e("#popup_wrapper").tween({opacity:{stop:100,duration:1,effect:"easeOut"}});e.play()}function d(){e("#popup_wrapper").tween({opacity:{stop:0,duration:.5,effect:"easeOut",onStop:function(){e("#popup_wrapper").css("display","none")}}});e.play()}function v(){var t=e("#chars .active"),n=t.next().length>0?t.next():e("#chars img:first");n.css("z-index",2);t.fadeOut(1500,function(){t.css("z-index",1).show().removeClass("active");n.css("z-index",3).addClass("active")})}function g(){fastShow(e("#slider"));e(".thumbs a img").tween({opacity:{start:100,stop:50,duration:.1}});e.play();l=e("#slider").bxSlider({controls:!1,pager:!1,adaptiveHeight:!0,minSlides:1,maxSlides:1,moveSlides:1,slideWidth:445,easing:"ease-in-out",touchEnabled:!1,useCSS:!0,pager:!1,infiniteLoop:!0});e(".thumbs a").click(function(t){t.preventDefault();var n=e(".thumbs a").index(this);l.goToSlide(n);e(".thumbs a").removeClass("pager-active");if(m){m.bind("mouseenter",fadeToFull);m.bind("mouseleave",fadeToHalf);m.mouseleave()}e(this).addClass("pager-active");m=e(this);m.unbind("mouseleave");m.unbind("mouseenter");return!1});e(".thumbs a:first").addClass("pager-active");m=e(".thumbs a:first");m.mouseenter();m.unbind("mouseleave");m.unbind("mouseenter")}function y(){fastShow(e("#pets"));e("#pets").bxSlider({minSlides:1,maxSlides:3,moveSlides:1,slideWidth:264,easing:"ease-in-out",touchEnabled:!1,useCSS:!0,pager:!1,infiniteLoop:!0,onSlideBefore:function(){Cufon.refresh(".myth")}})}function w(){b=!0;x();setTimeout(y,500);setTimeout(g,500);e("#s_1 #video a").removeClass("fancybox");e("#video a.fancybox").fancybox({type:"iframe",openEffect:"none",closeEffect:"none",scrolling:"no"});e(".thumbs a").bind("mouseenter",fadeToFull);e(".thumbs a").bind("mouseleave",fadeToHalf);e(".video_frame a").bind("mouseenter",fadeTo90);e(".video_frame a").bind("mouseleave",fadeToFull)}function S(){var t=e("#header img").size();e("#header img").load(function(){E++;if(E==t){header_loaded=!0;x()}}).load()}function x(){if(header_loaded&&b){e("body").addClass("loaded");setTimeout(function(){e("#loader").fadeOut(500,function(){e(this).hide()});normalShow(e("#header"));normalShow(e("#branch-right"));normalShow(e("#branch-left"));setInterval(v,7e3)},1e3)}}function T(t){e("#chars img").each(function(n,r){e(this).attr("src",e(this).attr("data-"+t))})}var t=0,n=new Array;e("#slides .slide").each(function(r){n[r]=t;t+=445;if(!e(this).width())return!0});e("#slides").width(t);e("#menu ul li a").click(function(t,r){e("li.menuItem").removeClass("act").addClass("inact");e(this).parent().addClass("act");var i=e(this).parent().prevAll(".menuItem").length;e("#slides").stop().animate({marginLeft:-n[i]+"px"},800);t.preventDefault();r||clearInterval(o)});e("#menu ul li.menuItem:first").addClass("act").siblings().addClass("inact");var r=1,s=4,o=setInterval(function(){i()},s*1e3),u=!1,a,f,l;e(function(){e.client.browser=="Chrome"&&navigator.userAgent.toLowerCase().indexOf("mobile")<0?e("a#playnow, a.button").attr("href",chrome_link).attr("target","_blank"):DetectKindle()?e("a#playnow, a.button").attr("href",kindle_link).attr("target","_blank"):DetectAndroid()?e("a#playnow, a.button").attr("href",googleplay_link).attr("target","_blank"):DetectIos()?e("a#playnow, a.button").attr("href",appstore_link).attr("target","_blank"):e("a#playnow, a.button").attr("href","http://account.spacetimestudios.com/arcanelegends/").attr("target","_blank")});e(window).resize(function(t){var n=e("#header").width(),r=document.width;if(r<n&&r>=1100)e("#chars img").css({left:(r-n)/2+"px"});else if(r<1100){e("#s_0 #badges").css({left:"4%"});e("#chars img").css({left:(r-n)/2+"px"})}else e("#chars img").css({left:0});var i=0;if(window.screen.width<768||DetectMobileLong())i=1;u||(window.orientation==-90?h(i,window.screen.height):h(i,window.screen.width))});e(window).resize();e(".switch_mobile").bind("click",function(e){u=!0;e.preventDefault();window.orientation==-90?h(1,window.screen.height):h(1,window.screen.width)});e(".switch_desktop").bind("click",function(e){u=!0;e.preventDefault();window.orientation==-90?h(0,window.screen.height):h(0,window.screen.width)});var m,b=!1,E=0;header_loaded=!1;slide_left2(1);e("#pets123").swipe({swipeLeft:function(){slide_left2()},swipeRight:function(){slide_right2()}});slide_left(1);e("#slider22").swipe({swipeLeft:function(){slide_left()},swipeRight:function(){slide_right()}})});